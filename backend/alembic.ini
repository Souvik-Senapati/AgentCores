# Enterprise AgentCores Alembic Configuration
# Billion-dollar platform database migration management
# Built for MVP simplicity, designed for enterprise scale

[alembic]
# path to migration scripts
script_location = alembic

# template used to generate migration file names with enterprise structure
# Format: YYYY_MM_DD_HHMM-REV_DESCRIPTION for enterprise tracking
file_template = %%(year)d_%%(month).2d_%%(day).2d_%%(hour).2d%%(minute).2d-%%(rev)s_%%(slug)s

# sys.path path, will be prepended to sys.path if present.
# defaults to the current working directory.
prepend_sys_path = .

# timezone for enterprise compliance and audit trails
timezone = UTC

# Enterprise migration description length (for better tracking)
truncate_slug_length = 60

# Environment variable support for revision generation
# Allows dynamic configuration in different environments
revision_environment = true

# Support for compiled .pyc files in enterprise deployments
sourceless = false

# Enterprise version number format with zero-padding
version_num_format = %%04d

# Enterprise version name format with timestamp
version_name_format = %%(year)d_%%(month).2d_%%(day).2d_%%(hour).2d%%(minute).2d_%%(rev)s

# UTF-8 encoding for international enterprise deployments
output_encoding = utf-8

# Dynamic database URL from environment variables
# Production environments will override this via DATABASE_URL
sqlalchemy.url = postgresql://agent_user:agent_password@localhost:5432/agentcores_db

# Enterprise migration metadata
[migration_metadata]
# Enterprise compliance and audit information
enterprise_mode = true
compliance_tracking = true
audit_migrations = true
multi_tenant_aware = true

# Deployment tracking
deployment_environment = %(ENV_ENVIRONMENT)s
deployment_version = %(ENV_APP_VERSION)s
migration_author = %(ENV_MIGRATION_AUTHOR)s

[post_write_hooks]

[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S